// stable_function_mix.stp - normal function and embedded-c function

global fn2_hits

function fn1:long() %{
	/* pure */ /* stable */
	STAP_RETURN(100);
%}

function fn2:long() {
  fn2_hits++
  x = fn1()
  y = fn1()
  if (x == y) {
    z = fn1()
  }
  return x+y+z
}

probe begin {
  x = fn1()
  x = fn2()
  println(x, " ", fn2(), " ", fn2_hits)
	exit()
}
